---
layout: "post"
title: "编码规范"
date: "2016-06-20 15:51"
---

遵循编码规范的优点有很多，大多公司和个人遵循的编码规范基于 `『谷歌c++编程龟蛋』` `『代码整洁之道』` `『高质量c\/c++编程』`。

<!-- more -->
下面参考别人的介绍，列出一些编程时应该遵循的编码规范『原则』

- 头文件中『防卫式』声明
- 使用『静态成员函数』或名字空间内的非成员函数
- 将变量尽量置于『最小作用于内』，变量声明的同时初始化
- 禁止使用 `class` 类型的『静态或全局变量』
- 定义若干成员变量又没有其他构造函数，『必须定义一个构造函数』
- 不要使用缺省函数参数
- 尽量使用 `const`
- 整数用 `0`， 实数用 `0.0`， 指针用 `null`， 字符（串）用 `\n`
- 保持命名的一致性和描述性
- 宏只能用大写字母和下划线
- 注释风格要统一
- 文件开头加版权公告，许可证，作者，文件描述等信息
- 不要混淆制表符和空格
- 大括号是否另起一行，必须统一
- 文件较多时使用文件夹存放不同的文件，可依照类型或者模块划分文件夹
- 检测内存泄露
- 数据成员必须是私有的
- 所有的继承『必须是public』的，如果需要使用私有继承，你应该替换成把『基类的实例作为成员对象的方式』。
- 不要直接使用内置类型，使用 `<stdlib.h>` 中长度精确的整型，如 `int16_t`
- 用变量代替『魔数』

尽量遵从的规范

- 用宏或者内联函数实现较短的函数
- 类的访问控制区段的声明顺序： `typedef` 和枚举、常亮、构造函数、析构函数、成员函数、数据成员
- 文件中函数的定义顺尽量和声明顺序一致
- 仅当只有数据时使用 `struct`， 其他一概使用 `class`
- 一般不要重载符，使用函数。如 `add`
- 不要使用变长数组
- 空循环应使用 `{}` 或 `continue`
- 为程序写 `readme`
- 尽量更少的包含头文件
- 合理使用内联函数，内联函数最好 `10` 以内。头文件中的 `get` 和 `set`函数一般定义为内联函数
- 构造函数中只进行一些没有意义的初始化『0，NULL，1等』，使用 `init` 方法初始化有意义的数据
- 继承和组合
- 使用 `c++` 的类型转换
- 不要使用流
- **对迭代器和模板类型，使用前置自增减**
- 每个类尽量都有注释、功能描述和用法
- 行末不出现空格、制表符、空注释
- 在函数的入口检查参数的有效性『assert』
- `c++` 尽量不要使用宏、以内联函数、枚举和常量代替


比较有难度的

- 尽量使用前置声明代替头文件
- 尽量不要使用 `c++` 的异常处理，将异常处理独立出来
- 类型和变量应该是名词、函数名应该可以用『命令性』动词
- 全局变量加 `g_` 前缀
- 对单个参数的构造函数使用 `c++` 关键字 `explict` ，防止隐式转换。仅在代码中需要拷贝一个类对象的时候使用构造函数
- 一个函数只做一件事，并处于同一抽象层级
- 尽量使用少的函数参数， `c++` 中尽量声明成类的成员变量
- 尽可能使用 `sizeof(varname)` 代替 `sizeof(type)`
- 返回类型和函数名在同一行，参数也尽量放在同一行。参数太多一行一个参数，但第一个参数尽量在函数名同一行
- 尽量避免函数的记忆功能（ `static`， `global`），保证相同的输入有相同的输出
- 尽量使用 `switch` 代替多态
